{"metadata":{"guid":"e2d03896-b708-4da2-8074-70c5586d4a37","revision":"9-74c0f07f5d4f7f1359d56ac14f2775a5","url":"/v2/streaming_pipelines/e2d03896-b708-4da2-8074-70c5586d4a37","created_at":"2017-07-31T23:56:38.632Z","updated_at":"2017-08-01T01:03:41.772Z"},"entity":{"name":"aggregate_for_redis","description":"Capture and aggregate login, add_to_cart and checkout events and store summarized data in Redis.","project_guid":"81238e6c-a19b-4c5c-9e45-753dfe7b7de3","graph":{"activity":{"docType":"activity","name":"aggregate_for_redis","id":"TBD","createdUser":"TBD","createdTimeStamp":"TBD","lastModifiedUser":"TBD","lastModifiedTimeStamp":"TBD","version":"4.0","expirationDelay":"never","isSchedulable":false,"isCancellable":false,"isSuspendable":false,"isPausable":false,"createdByServiceType":"StreamingPipelines","runsURL":"TBD","schedulesURL":"TBD","isRunContinuously":true,"URL":"TBD","inputDocument":{"pipeline":{"name":"aggregate_for_redis","pipelineRef":"TBD","operationMetadata":[{"opId":"operation0","canvasPosition":{"x":540,"y":220},"annotations":[]},{"opId":"operation1","canvasPosition":{"x":540,"y":310},"annotations":[]},{"opId":"operation2","canvasPosition":{"x":540,"y":390},"annotations":[]}]},"classifications":[],"sources":[{"name":"MessageHub","connection":{"id":"n1501545520756caymeiv2hpr","type":"ibm/streams/sources/messagehub","instance":"70f2cf38-982d-4f32-aef5-76d9c6c22375","topic":"login","schemaMapping":[{"name":"customer_id","type":"double","length":0,"sourceElemName":"/customer_id"}]},"tables":[{"name":"table0","datasetBindings":[{"datasetRef":"dataset3","port":"target"}],"displayMetadata":{"canvasPosition":{"x":250,"y":220},"annotations":[]}}]},{"name":"MessageHub","connection":{"id":"n15015468824207eppjdingog","type":"ibm/streams/sources/messagehub","instance":"70f2cf38-982d-4f32-aef5-76d9c6c22375","topic":"add_to_cart","schemaMapping":[{"name":"customer_id","sourceElemName":"/customer_id","type":"double"},{"name":"total_price_of_basket","sourceElemName":"/total_price_of_basket","type":"double"}]},"tables":[{"name":"table1","datasetBindings":[{"datasetRef":"dataset4","port":"target"}],"displayMetadata":{"canvasPosition":{"x":250,"y":310},"annotations":[]}}]},{"name":"MessageHub","connection":{"id":"n1501548244983hzf5g0zu5ht","type":"ibm/streams/sources/messagehub","instance":"70f2cf38-982d-4f32-aef5-76d9c6c22375","topic":"checkout","schemaMapping":[{"name":"customer_id","sourceElemName":"/customer_id","type":"double"},{"name":"total_price_of_basket","sourceElemName":"/total_price_of_basket","type":"double"}]},"tables":[{"name":"table2","datasetBindings":[{"datasetRef":"dataset5","port":"target"}],"displayMetadata":{"canvasPosition":{"x":250,"y":390},"annotations":[]}}]}],"targets":[{"name":"Redis","connection":{"id":"n1501546654086vzh2tti87r","type":"ibm/streams/targets/redis","hostname":"sl-us-south-1-portal.4.dblayer.com","port":"17996","keyTemplate":"funnel"},"tables":[{"name":"table3","datasetBindings":[{"datasetRef":"dataset0","port":"source"}],"displayMetadata":{"canvasPosition":{"x":830,"y":220},"annotations":[]}}]},{"name":"Redis","connection":{"id":"n1501548151210ekzh4v3wlbf","type":"ibm/streams/targets/redis","hostname":"sl-us-south-1-portal.4.dblayer.com","port":"17996","keyTemplate":"funnel"},"tables":[{"name":"table4","datasetBindings":[{"datasetRef":"dataset1","port":"source"}],"displayMetadata":{"canvasPosition":{"x":830,"y":310},"annotations":[]}}]},{"name":"Redis","connection":{"id":"n1501548560531c5w2u71v6","type":"ibm/streams/targets/redis","hostname":"sl-us-south-1-portal.4.dblayer.com","port":"17996","keyTemplate":"funnel"},"tables":[{"name":"table5","datasetBindings":[{"datasetRef":"dataset2","port":"source"}],"displayMetadata":{"canvasPosition":{"x":830,"y":390},"annotations":[]}}]}]}},"pipeline":{"docType":"pipeline","name":"aggregate_for_redis","id":"TBD","createdUser":"TBD","createdTimeStamp":"TBD","lastModifiedUser":"TBD","lastModifiedTimeStamp":"TBD","version":"4.0","inputDocument":{"schema":[{"id":"schema0","name":"N/A","columns":[{"name":"login_count","type":{"type":"int"}}]},{"id":"schema1","name":"N/A","columns":[{"name":"basket_total","type":{"type":"double"}},{"name":"basket_count","type":{"type":"int"}}]},{"id":"schema2","name":"N/A","columns":[{"name":"checkout_total","type":{"type":"double"}},{"name":"checkout_count","type":{"type":"int"}}]},{"id":"schema3","name":"N/A","columns":[{"name":"customer_id","type":{"type":"double"},"length":0}]},{"id":"schema4","name":"N/A","columns":[{"name":"customer_id","type":{"type":"double"}},{"name":"total_price_of_basket","type":{"type":"double"}}]},{"id":"schema5","name":"N/A","columns":[{"name":"customer_id","type":{"type":"double"}},{"name":"total_price_of_basket","type":{"type":"double"}}]}],"datasets":[{"id":"dataset0","schemaRef":"schema0","type":"intermediate"},{"id":"dataset1","schemaRef":"schema1","type":"intermediate"},{"id":"dataset2","schemaRef":"schema2","type":"intermediate"},{"id":"dataset3","schemaRef":"schema3","type":"source"},{"id":"dataset4","schemaRef":"schema4","type":"source"},{"id":"dataset5","schemaRef":"schema5","type":"source"}],"operations":[{"id":"operation0","name":"Aggregation","type":"ibm/streams/operations/aggregate","version":"4.0","parameters":[{"name":"windowType","value":"sliding"},{"name":"windowTimeUnit","value":"hour"},{"name":"windowNumberOfTimeUnits","value":"1"},{"name":"useTimestampInTuple"},{"name":"timestampField"},{"name":"timestampFormat"},{"name":"partitionBy"},{"name":"groupBy"},{"name":"aggregationOutput","value":[{"name":"login_count","value":{"function":"Count","type":"","arguments":[]},"type":""}]},{"name":"schemaMapping","value":[{"name":"login_count","type":"int"}]}],"inputDatasets":[{"datasetRef":"dataset3","port":"source"}],"outputDatasets":[{"datasetRef":"dataset0","port":"target"}]},{"id":"operation1","name":"Aggregation","type":"ibm/streams/operations/aggregate","version":"4.0","parameters":[{"name":"windowType","value":"sliding"},{"name":"windowTimeUnit","value":"hour"},{"name":"windowNumberOfTimeUnits","value":"1"},{"name":"useTimestampInTuple"},{"name":"timestampField"},{"name":"timestampFormat"},{"name":"partitionBy"},{"name":"groupBy"},{"name":"aggregationOutput","value":[{"name":"basket_total","value":{"function":"Sum","type":"double","arguments":["total_price_of_basket"]},"type":""},{"name":"basket_count","value":{"function":"Count","type":"","arguments":[]},"type":""}]},{"name":"schemaMapping","value":[{"name":"basket_total","type":"double"},{"name":"basket_count","type":"int"}]}],"inputDatasets":[{"datasetRef":"dataset4","port":"source"}],"outputDatasets":[{"datasetRef":"dataset1","port":"target"}]},{"id":"operation2","name":"Aggregation","type":"ibm/streams/operations/aggregate","version":"4.0","parameters":[{"name":"windowType","value":"sliding"},{"name":"windowTimeUnit","value":"hour"},{"name":"windowNumberOfTimeUnits","value":"1"},{"name":"useTimestampInTuple"},{"name":"timestampField"},{"name":"timestampFormat"},{"name":"partitionBy"},{"name":"groupBy"},{"name":"aggregationOutput","value":[{"name":"checkout_total","value":{"function":"Sum","type":"double","arguments":["total_price_of_basket"]},"type":""},{"name":"checkout_count","value":{"function":"Count","type":"","arguments":[]},"type":""}]},{"name":"schemaMapping","value":[{"name":"checkout_total","type":"double"},{"name":"checkout_count","type":"int"}]}],"inputDatasets":[{"datasetRef":"dataset5","port":"source"}],"outputDatasets":[{"datasetRef":"dataset2","port":"target"}]}]}}},"creator":"ptitzler@us.ibm.com"}}
